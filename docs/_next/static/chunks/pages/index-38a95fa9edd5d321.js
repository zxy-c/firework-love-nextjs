(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{724:function(t,e){"use strict";function i(t,e){let i=t.indexOf(e);return -1!==i&&(t.splice(i,1),!0)}let s=t=>t;function n(t){return"number"==typeof t?t:0}e.Z={sum:function(t,e=n){let i=0;return t.forEach(t=>{i+=e(t)}),i},remove:i,removeBy:function(t,e){let s=t.find(e);return i(t,s)},intersectionOf:function(t,e){return t.filter(t=>e.includes(t))},groupBy:function(t,e,i){let s=new Map;return t.forEach((t,n,o)=>{let r=e(t),h=i&&i(t,n);s.has(r)?s.set(r,s.get(r).concat([h])):s.set(r,[h])}),s},sortComposition:function(t,e){return e.length?t.sort((t,i)=>{for(let s of e){let n=s(t,i);if(0!==n)return n}return 0}):t.sort()},toMap:function(t,e,i){return new Map(t.map((t,s)=>[e(t,s),(i||(t=>t))(t,s)]))},repeat:function(t,e){let i=[];for(let s=0;s<e;s++)i.push(t);return i},generate:function(t,e){return Array.from(Array(t).keys()).map(e)},findMaxItem:function(t,e=s){return t.reduce((t,i)=>e(t)>e(i)?t:i)},findMinItem:function(t,e=s){return t.reduce((t,i)=>e(t)<e(i)?t:i)},exchange:function(t,e,i){let s=t[e];t[e]=t[i],t[i]=s}}},3454:function(t,e,i){"use strict";var s,n;t.exports=(null==(s=i.g.process)?void 0:s.env)&&"object"==typeof(null==(n=i.g.process)?void 0:n.env)?i.g.process:i(7663)},8312:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(1390)}])},1390:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return g}});var s=i(5893),n=i(844),o=i.n(n),r=i(7294);function h(t,e){return t+Math.random()*(e-t)}var a={randomItemFromArray:function(t){return t[Math.floor(h(0,t.length))]},randomNumberFromRange:h},u={rgbaWithHexOpacity:function(t,e){let i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return"rgba("+i+", "+s+", "+n+", "+e+")"}};class c{update(t){if(this.deadTime-=t,this.deadTime<=0)this.dispose();else{let e=this.canvas.getContext("2d");this.x+=this.xSpeed*t/1e3,this.y-=this.ySpeed*t/1e3,e.fillStyle=u.rgbaWithHexOpacity(this.color,this.deadTime%1),e.fillRect(this.x,this.y,1,1)}}dispose(){this.onDispose&&this.onDispose()}constructor(t,e,i,s,n=1e3){this.canvas=t,this.x=e,this.y=i,this.color=s,this.deadTime=n,this.xSpeed=a.randomNumberFromRange(c.minXSpeed,c.maxXSpeed),this.ySpeed=a.randomNumberFromRange(c.minYSpeed,c.maxYSpeed)}}c.minXSpeed=-8,c.maxXSpeed=8,c.minYSpeed=4,c.maxYSpeed=8;var l=i(724);class d{get keepTime(){return this.deadTime-this.stopTime}update(t){let e=t/1e3;if(this.active||(this.stopTime-=e,this.deadTime-=e),this.nextFireLightCountdown-=t,this.nextFireLightCountdown<=0){let i=new c(this.canvas,a.randomNumberFromRange(this.x-d.fireLightGenerateRadius,this.x+d.fireLightGenerateRadius),a.randomNumberFromRange(this.y-d.fireLightGenerateRadius,this.y+d.fireLightGenerateRadius),this.color,200);i.onDispose=()=>{l.Z.remove(this.fireLights,i)},this.fireLights.push(i),this.nextFireLightCountdown=20}if(this.deadTime<=0)this.dispose();else{let s=Math.max(Math.min(this.deadTime/this.keepTime,1),.2);this.stopTime>0&&!this.active&&(this.x+=(this.xSpeed*e+this.xDeceleration*Math.pow(e,2)/2)*(this.destinationX>=this.x?1:-1),this.y+=(this.ySpeed*e+this.yDeceleration*Math.pow(e,2)/2)*(this.destinationY>=this.y?1:-1),this.xSpeed=Math.max(this.xSpeed+e*this.xDeceleration,0),this.ySpeed=Math.max(this.ySpeed+e*this.yDeceleration,0));let n=this.canvas.getContext("2d");n.beginPath(),n.arc(this.x,this.y,this.radius,0,2*Math.PI),n.fillStyle=u.rgbaWithHexOpacity(this.color,s),n.fill()}for(let o of this.fireLights)o.update(t)}dispose(){this.onDispose&&this.onDispose()}constructor(t,e,i,s,n,o){this.canvas=t,this.color=e,this.x=i,this.y=s,this.destinationX=n,this.destinationY=o,this.radius=1,this.stopTime=2,this.fireLights=[],this.nextFireLightCountdown=20,this.deadTime=4,this.active=!1,this.yDeceleration=-this.canvas.height/50,this.xDeceleration=-this.canvas.width/50,n===i?this.xSpeed=0:this.xSpeed=(Math.abs(n-i)-this.xDeceleration*Math.pow(this.stopTime,2)/2)/this.stopTime,o===s?this.ySpeed=0:this.ySpeed=(Math.abs(o-s)-this.yDeceleration*Math.pow(this.stopTime,2)/2)/this.stopTime}}d.fireLightGenerateRadius=5;var f={getHeartX:function(t,e){return t*(16*Math.pow(Math.sin(e),3))},getHeartY:function(t,e){return-t*(13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e))}};class m{update(t){let e=this.canvas.getContext("2d");if(this.exploded){if(this.lightTime-=t,this.lightTime>=0){let i=e.createRadialGradient(this.x,this.y,0,this.x,this.y,Math.max(Math.abs(this.x),Math.abs(this.y)));i.addColorStop(0,u.rgbaWithHexOpacity(this.color,this.lightTime/m.initialLightTime*.1)),i.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=i,e.globalCompositeOperation="lighter",e.fillRect(0,0,this.canvas.width,this.canvas.height),e.globalCompositeOperation="source-over"}}else if(this.explodeCountdown<=0){if(this.exploded=!0,this.burstBuffer){let s=this.audioContext.createBufferSource();s.buffer=this.burstBuffer;let n=this.audioContext.createGain();n.gain.value=1,s.connect(n).connect(this.audioContext.destination),s.start(0)}let o=Math.min(this.canvas.height,this.canvas.width),r=Math.round(a.randomNumberFromRange(o/100,o/50)),h=10*r;l.Z.generate(h,t=>{let e=t/h*2*Math.PI,i=new d(this.canvas,this.color,this.x,this.y,this.x+f.getHeartX(r,e),this.y+f.getHeartY(r,e));i.onDispose=()=>{l.Z.remove(this.fireFlowers,i)},this.fireFlowers.push(i)})}else{if(this.explodeCountdown-=t,this.nextFireLightCountdown-=t,this.nextFireLightCountdown<=0){let p=new c(this.canvas,a.randomNumberFromRange(this.x-m.fireLightGenerateRadius,this.x+m.fireLightGenerateRadius),this.y,this.color);p.onDispose=()=>{l.Z.remove(this.fireLights,p)},this.fireLights.push(p)}e.beginPath(),this.ySpeed=this.ySpeed-this.yDeceleration*t/1e3,this.y=this.y-t/1e3*Math.max(this.ySpeed,0),e.arc(this.x,this.y,this.radius,0,2*Math.PI);let x=e.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);x.addColorStop(0,this.color),x.addColorStop(1,u.rgbaWithHexOpacity(this.color,.2)),e.fillStyle=x,e.fill(),e.moveTo(this.x,this.y);let g=.2*this.ySpeed,v=this.y+g,y=e.createRadialGradient(this.x,this.y,0,this.x,this.y,Math.max(g,0));y.addColorStop(0,u.rgbaWithHexOpacity(this.color,a.randomNumberFromRange(.2,1))),y.addColorStop(1,"rgba(255,255,255,0)"),e.strokeStyle=y,e.lineWidth=1,e.lineTo(this.x,v),e.stroke()}for(let F of this.fireLights)F.update(t);for(let T of this.fireFlowers)T.update(t)}consumeTouchPath(t){if(this.fireFlowers.some(t=>t.stopTime<=0)){let e=this.canvas.getContext("2d");e.lineWidth=8;let i=new Path2D;for(let s of(i.moveTo(this.fireFlowers[0].x,this.fireFlowers[0].y),this.fireFlowers))i.lineTo(s.x,s.y);if(i.closePath(),t.filter(t=>e.isPointInStroke(i,t[0],t[1])).length>=t.length/3){for(let n of this.fireFlowers)n.active=!0;return e.closePath(),!0}e.closePath()}return!1}constructor(t,e,i,s=new AudioContext){if(this.canvas=t,this.burstBuffer=e,this.audioContext=s,this.radius=1,this.exploded=!1,this.nextFireLightCountdown=50,this.fireLights=[],this.fireFlowers=[],this.lightTime=m.initialLightTime,null!=i){let n=this.audioContext.createBufferSource();n.buffer=i;let o=this.audioContext.createGain();o.gain.value=1,n.connect(o).connect(this.audioContext.destination),n.start(0)}let r=.1*t.width;this.ySpeed=t.height/a.randomNumberFromRange(m.minYInitialSpeed,m.maxYInitialSpeed),this.yDeceleration=this.ySpeed/a.randomNumberFromRange(3,5),this.y=t.height,this.x=a.randomNumberFromRange(r,t.width-r),this.explodeCountdown=a.randomNumberFromRange(m.minExplodeCountdown,m.maxExplodeCountdown),this.color=a.randomItemFromArray(m.selectableColors)}}m.maxYInitialSpeed=4.5,m.minYInitialSpeed=3.5,m.maxYDeceleration=10,m.minYDeceleration=7,m.maxExplodeCountdown=4e3,m.minExplodeCountdown=3e3,m.fireLightGenerateRadius=3,m.selectableColors=["#FF5252","#FF4081","#E040FB","#7C4DFF","#536DFE","#448AFF","#40C4FF","#18FFFF","#64FFDA","#69F0AE","#B2FF59","#EEFF41","#FFFF00","#FFD740","#FFAB40"],m.initialLightTime=1e3;var p=i(3454);class x{computeNextFireTime(){this.nextFireTime+=a.randomNumberFromRange(400,1200)}fire(){this.fireworks.push(new m(this.canvas,this.burstBuffer,this.fireBuffer,this.audioContext))}update(t){let e=-1===this.prevTime?0:t-this.prevTime;this.nextFireTime<=t&&(this.fire(),this.computeNextFireTime());let i=this.canvas.getContext("2d");i.fillStyle="black",i.fillRect(0,0,this.canvas.width,this.canvas.height),this.fireworks.forEach(t=>{t.update(e)}),this.prevTime=t,this.requestNextFrame()}requestNextFrame(){this.requestAnimationFrameNumber=window.requestAnimationFrame(t=>this.update(t))}dispose(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchend",this.onTouchend),this.canvas.removeEventListener("touchend",this.onTouchmove),this.requestAnimationFrameNumber&&window.cancelAnimationFrame(this.requestAnimationFrameNumber)}constructor(t){this.canvas=t,this.prevTime=-1,this.nextFireTime=2e3,this.explosionTime=2e3,this.fireworks=[],this.touched=!1,this.touchPoints=[],this.audioContext=new AudioContext,this.onTouchstart=()=>{this.touched=!0,this.touchPoints=[]},this.onTouchend=()=>{for(let t of(this.touched=!1,this.fireworks))if(t.consumeTouchPath(this.touchPoints))break},this.onTouchmove=t=>{t.preventDefault();let e=t.touches.item(0);e&&this.touchPoints.push([e.clientX,e.clientY])},this.requestNextFrame(),this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchend",this.onTouchend),this.canvas.addEventListener("touchmove",this.onTouchmove),Promise.all([fetch("".concat(p.env.NEXT_PUBLIC_BASE_PATH,"/audio/burst.mp3")).then(t=>t.arrayBuffer()).then(t=>this.audioContext.decodeAudioData(t)).then(t=>{this.burstBuffer=t}),fetch("".concat(p.env.NEXT_PUBLIC_BASE_PATH,"/audio/fire.mp3")).then(t=>t.arrayBuffer()).then(t=>this.audioContext.decodeAudioData(t)).then(t=>this.fireBuffer=t)]).then(()=>{this.onLoad&&this.onLoad()})}}function g(){(0,r.useEffect)(()=>{console.log("useEffect");let e=t.current;e.width=document.body.getBoundingClientRect().width,e.height=document.body.getBoundingClientRect().height;let i=e.getContext("2d");i.fillStyle="black",i.fillRect(0,0,e.width,e.height);let s=new x(e);return()=>{s.dispose()}},[]);let t=(0,r.useRef)(null);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("canvas",{className:o().canvas,ref:t})})}},844:function(){},7663:function(t){!function(){var e={229:function(t){var e,i,s,n=t.exports={};function o(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function h(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(s){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(s){i=r}}();var a=[],u=!1,c=-1;function l(){u&&s&&(u=!1,s.length?a=s.concat(a):c=-1,a.length&&d())}function d(){if(!u){var t=h(l);u=!0;for(var e=a.length;e;){for(s=a,a=[];++c<e;)s&&s[c].run();c=-1,e=a.length}s=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(s){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.push(new f(t,e)),1!==a.length||u||h(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}},r=!0;try{e[t](o,o.exports,s),r=!1}finally{r&&delete i[t]}return o.exports}s.ab="//";var n=s(229);t.exports=n}()}},function(t){t.O(0,[774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);